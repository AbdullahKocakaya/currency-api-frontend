<!DOCTYPE html>
<html lang="en">

<head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
        .always-visible {
            display: block !important;
        }
    </style>
</head>

<body class="container">
    <div class="row" id="ProfileList"></div>



    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <!--JavaScript at end of body for optimized loading-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>

    <script>
        $(document).ready(function () {

            //Sample XML    
            var xml = "<asd>\
            <currency>\
                <currencyCode>USD</currencyCode>\
                <currencyName>US DOLLAR</currencyName>\
                <forexBuying>6.6213</forexBuying>\
                <forexSelling>6.6333</forexSelling>\
                <banknoteBuying>6.6167</banknoteBuying>\
                <banknoteSelling>6.6432</banknoteSelling>\
            </currency>\
            <currency>\
                <currencyCode>EUR</currencyCode>\
                <currencyName>EURO</currencyName>\
                <forexBuying>6.1252</forexBuying>\
                <forexSelling>6.1362</forexSelling>\
                <banknoteBuying>6.1209</banknoteBuying>\
                <banknoteSelling>6.1454</banknoteSelling>\
            </currency>\
            </asd>";

    /*        $.ajax({
                url: "http://localhost:8080/currency/getCurrencies/today",
                success: function (res) {
                    console.log(res);
                }
            });
    */
            //Parse the givn XML
            var doc;
            var x = new XMLHttpRequest();
            x.open("GET", "http://localhost:8080/currency/getCurrencies/today", true);
            x.onreadystatechange = function () {
                if (x.readyState == 4 && x.status == 200) {
                    doc = x.responseXML;
                }
            };

            var xmlDoc = $.parseXML('<asd>' + xml + '</asd>');

            var $xml = $(xmlDoc);

            // Find Person Tag
            var $currency = $xml.find("currency");

            $currency.each(function () {

                var currencyCode = $(this).find('currencyCode').text();
                var currencyName = $(this).find('currencyName').text();
                var forexBuying = $(this).find('forexBuying').text();
                var forexSelling = $(this).find('forexSelling').text();
                var banknoteBuying = $(this).find('banknoteBuying').text();
                var banknoteSelling = $(this).find('banknoteSelling').text();

                $("#ProfileList").append(
                    '<div class="col s12 m3">\
                        <div class="card">\
                            <div class="card-image">\
                                <img style="height:80px;" src="resource/img/background02.jpg">\
                                <span class="card-title">' + currencyName + '</span>\
                                <a class="btn-floating halfway-fab waves-effect waves-light red">\
                                    <i class="material-icons">close</i>\
                                </a>\
                            </div>\
                            <div class="card-content">\
                                <p>Forex Buying ' + forexBuying + '<br> Forex Selling ' + forexSelling + '<br>Banknote Buying ' + banknoteBuying + '<br>Banknote Selling ' + banknoteSelling + '</p>\
                            </div>\
                        </div>\
                    </div>');
            });


        });
        $(function () {

        });
    </script>



</body>

</html>